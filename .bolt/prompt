For all designs I ask you to make, have them be beautiful, not cookie cutter. Make webpages that are fully featured and worthy for production.

By default, this template supports JSX syntax with Tailwind CSS classes, React hooks, and Lucide React for icons. Do not install other packages for UI themes, icons, etc unless absolutely necessary or I request them.

Use icons from lucide-react for logos.

Use stock photos from unsplash where appropriate, only valid URLs you know exist. Do not download the images, only link to them in image tags.

---

# ğŸ¤– CONTEXTE DU PROJET - RadioManager SaaS

## ğŸ“š Documents de rÃ©fÃ©rence essentiels

**Ã€ CONSULTER EN PRIORITÃ‰ :**

1. **[AGENT.md](AGENT.md)** - Guide complet pour agents IA
   - RÃ¨gles de push (develop par dÃ©faut, main uniquement si demandÃ©)
   - RÃ¨gle de confirmation automatique aprÃ¨s fix
   - Gestion des versions (SemVer)
   - Conventions de commit
   - Structure du projet

2. **[CHANGELOG.md](CHANGELOG.md)** - Historique des modifications
   - Contexte des changements rÃ©cents
   - DÃ©cisions techniques prises
   - Ã‰tat actuel du projet
   - **Version actuelle : 1.1.5**

3. **[docs/GIT_WORKFLOW.md](docs/GIT_WORKFLOW.md)** - StratÃ©gie de branches
   - `develop` â†’ Serveur TEST
   - `main` â†’ PRODUCTION
   - RÃ¨gles de merge

4. **[docs/VERSIONING.md](docs/VERSIONING.md)** - Gestion versions SemVer
   - MAJOR.MINOR.PATCH
   - Quand incrÃ©menter chaque niveau

## ğŸ“– Documentation technique par module

| Module | Documentation |
|--------|---------------|
| **Citations** | [docs/modules/quotes.md](docs/modules/quotes.md) |
| **Conducteurs** | [docs/modules/show-plans.md](docs/modules/show-plans.md) |
| **Archives** | [docs/modules/archives.md](docs/modules/archives.md) |
| **Authentification** | [docs/modules/authentication.md](docs/modules/authentication.md) |
| **Chat** | [docs/modules/chat.md](docs/modules/chat.md) |
| **Dashboard** | [docs/modules/dashboard.md](docs/modules/dashboard.md) |
| **Ã‰missions** | [docs/modules/emissions.md](docs/modules/emissions.md) |
| **InvitÃ©s** | [docs/modules/guests.md](docs/modules/guests.md) |
| **PrÃ©sentateurs** | [docs/modules/presenters.md](docs/modules/presenters.md) |
| **Profil** | [docs/modules/profile.md](docs/modules/profile.md) |
| **ParamÃ¨tres** | [docs/modules/settings.md](docs/modules/settings.md) |
| **TÃ¢ches** | [docs/modules/tasks.md](docs/modules/tasks.md) |
| **Ã‰quipe** | [docs/modules/team.md](docs/modules/team.md) |
| **Utilisateurs** | [docs/modules/users.md](docs/modules/users.md) |

## ğŸ¯ Documentation mÃ©tier

| Document | Description |
|----------|-------------|
| [docs/business/README.md](docs/business/README.md) | Vue d'ensemble mÃ©tier |
| [docs/business/authentication-and-access.md](docs/business/authentication-and-access.md) | Authentification & accÃ¨s |
| [docs/business/emissions-and-content.md](docs/business/emissions-and-content.md) | Ã‰missions & contenu |
| [docs/business/programming-and-scheduling.md](docs/business/programming-and-scheduling.md) | Programmation & planification |
| [docs/business/talent-and-collaboration.md](docs/business/talent-and-collaboration.md) | Talents & collaboration |
| [docs/business/user-and-permissions.md](docs/business/user-and-permissions.md) | Utilisateurs & permissions |

## ğŸ”— Documentation spÃ©cifique

- **[docs/QUOTES_SHOWPLAN_INTEGRATION.md](docs/QUOTES_SHOWPLAN_INTEGRATION.md)** - IntÃ©gration Citations â†” Conducteurs
- **[docs/TESTING_QUOTES.md](docs/TESTING_QUOTES.md)** - Guide de test du module Citations
- **[docs/API_MIGRATION_GUIDE.md](docs/API_MIGRATION_GUIDE.md)** - Migration API (api.radio.audace.ovh â†’ api.cloud.audace.ovh)
- **[docs/ARCHITECTURE_ANALYSIS.md](docs/ARCHITECTURE_ANALYSIS.md)** - Analyse de l'architecture

---

## ğŸš€ RÃˆGLES PRIORITAIRES (depuis AGENT.md)

### âš ï¸ RÃ¨gle de Push

```
PAR DÃ‰FAUT â†’ Pousser sur develop (serveur TEST)

git checkout develop
git add -A
git commit -m "ğŸ“ type(scope): Description"
git push origin develop

UNIQUEMENT si l'utilisateur dit "sur main" ou "en production" :
â†’ Demander confirmation avant de pousser sur main !
```

### âœ… RÃ¨gle de Confirmation Automatique

```
QUAND L'UTILISATEUR DIT "PROBLÃˆME RÃ‰SOLU" OU "Ã‡A MARCHE" :

L'AGENT DOIT AUTOMATIQUEMENT :
1. Faire un rÃ©sumÃ© rapide du fix
2. PrÃ©parer le message de commit
3. DÃ‰TERMINER L'IMPACT SUR LA VERSION (SemVer)
4. DEMANDER CONFIRMATION : "Voulez-vous que je pousse sur develop ? 
   Version X.Y.Z â†’ X.Y.W"
5. Si oui â†’ mettre Ã  jour package.json + CHANGELOG.md
6. Commit et push sur develop
```

### ğŸ·ï¸ Versioning (SemVer)

```
MAJOR (X.0.0) â†’ Changement INCOMPATIBLE
MINOR (0.X.0) â†’ Nouvelle FONCTIONNALITÃ‰
PATCH (0.0.X) â†’ Correction de BUG
```

### ğŸ“ Commits Conventionnels

```
âœ¨ feat(scope): Nouvelle fonctionnalitÃ©
ğŸ› fix(scope): Correction de bug
ğŸ“ docs(scope): Documentation
ğŸ¨ style(scope): Formatage (sans changement de code)
â™»ï¸ refactor(scope): Refactoring
âš¡ perf(scope): AmÃ©lioration performance
âœ… test(scope): Tests
ğŸ”§ chore(scope): Maintenance
```

---

## ğŸ› ï¸ STACK TECHNIQUE

### Frontend
- **React 18.2.0** + TypeScript 5.2.2
- **Vite 5.0.0** (build tool avec HMR)
- **Tailwind CSS 3.3.5** (styling)
- **Zustand 4.4.7** (state management avec persist)
- **React Router DOM 6.21.1** (routing)
- **React Hook Form 7.48.2** + Zod 3.22.4 (formulaires et validation)
- **Tanstack React Query 5.0.0** (data fetching)
- **Lucide React 0.309.0** (icÃ´nes)
- **date-fns 3.0.0** (manipulation dates)

### Backend & Services
- **FastAPI** (API Python)
- **Firebase Firestore 10.7.1** (base de donnÃ©es temps rÃ©el)
- **Firebase Storage** (stockage fichiers)
- **Firebase Auth** (authentification)

### Outils
- **jsPDF 2.5.2** + jsPDF AutoTable (gÃ©nÃ©ration PDF)
- **html2canvas** (capture d'Ã©cran pour rÃ©seaux sociaux)

---

## ğŸ“‚ STRUCTURE DU PROJET

```
radioManager-SaaS/
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ api/              # Services API
â”‚   â”‚   â”œâ”€â”€ firebase/     # Firebase (Firestore, Storage, Auth)
â”‚   â”‚   â””â”€â”€ auth/         # FastAPI Auth
â”‚   â”œâ”€â”€ components/       # Composants React
â”‚   â”‚   â”œâ”€â”€ auth/
â”‚   â”‚   â”œâ”€â”€ quotes/       # Module Citations
â”‚   â”‚   â”œâ”€â”€ showPlans/    # Module Conducteurs
â”‚   â”‚   â”œâ”€â”€ guests/
â”‚   â”‚   â”œâ”€â”€ sidebar/
â”‚   â”‚   â”œâ”€â”€ ui/
â”‚   â”‚   â””â”€â”€ ...
â”‚   â”œâ”€â”€ hooks/            # Custom hooks
â”‚   â”‚   â”œâ”€â”€ auth/
â”‚   â”‚   â”œâ”€â”€ quotes/
â”‚   â”‚   â”œâ”€â”€ shows/
â”‚   â”‚   â””â”€â”€ ...
â”‚   â”œâ”€â”€ pages/            # Pages de l'application
â”‚   â”‚   â”œâ”€â”€ Quotes/
â”‚   â”‚   â”œâ”€â”€ shows/
â”‚   â”‚   â”œâ”€â”€ guests/
â”‚   â”‚   â””â”€â”€ ...
â”‚   â”œâ”€â”€ schemas/          # SchÃ©mas de validation Zod
â”‚   â”œâ”€â”€ services/         # Services mÃ©tier
â”‚   â”œâ”€â”€ store/            # Stores Zustand
â”‚   â”œâ”€â”€ types/            # Types TypeScript
â”‚   â”œâ”€â”€ utils/            # Utilitaires
â”‚   â””â”€â”€ App.tsx           # Point d'entrÃ©e
â”œâ”€â”€ docs/                 # Documentation complÃ¨te
â”‚   â”œâ”€â”€ modules/          # Doc par module
â”‚   â””â”€â”€ business/         # Doc mÃ©tier
â”œâ”€â”€ AGENT.md              # Guide pour agents IA
â”œâ”€â”€ CHANGELOG.md          # Historique des modifications
â”œâ”€â”€ README.md             # Documentation projet
â””â”€â”€ package.json          # Version actuelle: 1.1.5
```

---

## ğŸ¯ MODULES IMPLÃ‰MENTÃ‰S

### âœ… Module Citations (Quotes)
**Documentation** : [docs/modules/quotes.md](docs/modules/quotes.md)

**FonctionnalitÃ©s** :
- âœ… Slice 1 : Lister les citations (temps rÃ©el Firestore)
- âœ… Slice 2 : CrÃ©er une citation manuelle
  - Formulaire complet avec validation Zod
  - Upload audio optionnel (Firebase Storage)
  - CrÃ©ation depuis un conducteur avec prÃ©-remplissage
  - SÃ©lection rapide des invitÃ©s du conducteur
- â³ Slice 3 : Voir dÃ©tails d'une citation
- â³ Slice 4 : Ã‰diter/Supprimer une citation
- â³ Slice 5 : GÃ©nÃ©rer contenu rÃ©seaux sociaux

**IntÃ©gration** :
- Lien avec Conducteurs : [docs/QUOTES_SHOWPLAN_INTEGRATION.md](docs/QUOTES_SHOWPLAN_INTEGRATION.md)
- Tests : [docs/TESTING_QUOTES.md](docs/TESTING_QUOTES.md)

**Permissions** :
- `quotes_view` : Voir les citations
- `quotes_create` : CrÃ©er des citations
- `quotes_edit` : Modifier des citations
- `quotes_delete` : Supprimer des citations
- `quotes_publish` : Publier des citations

### âœ… Module Conducteurs (Show Plans)
**Documentation** : [docs/modules/show-plans.md](docs/modules/show-plans.md)

**FonctionnalitÃ©s** :
- CrÃ©ation/Ã‰dition/Suppression de conducteurs
- Gestion des segments (intro, interview, musique, pub, outro)
- Assignation d'invitÃ©s et prÃ©sentateurs
- Timer de diffusion en direct
- Export PDF
- Gestion des statuts (prÃ©paration, attente diffusion, en cours, diffusÃ©, archivÃ©)
- Bouton "Nouvelle citation" pour capturer des citations en contexte

### âœ… Autres Modules
- **Dashboard** : Vue d'ensemble, programme du jour
- **InvitÃ©s (Guests)** : Gestion des invitÃ©s
- **PrÃ©sentateurs (Presenters)** : Gestion des animateurs
- **Ã‰quipe (Team)** : Gestion de l'Ã©quipe
- **Utilisateurs (Users)** : Gestion des utilisateurs et permissions
- **Archives** : Consultation et recherche dans les archives
- **Chat** : Messagerie interne (Firebase Firestore temps rÃ©el)
- **TÃ¢ches** : Gestion des tÃ¢ches
- **ParamÃ¨tres** : Configuration de l'application

---

## ğŸ” SYSTÃˆME DE PERMISSIONS

### Permissions Citations
```typescript
quotes_view                    // Voir les citations
quotes_create                  // CrÃ©er des citations
quotes_edit                    // Modifier des citations
quotes_delete                  // Supprimer des citations
quotes_publish                 // Publier des citations
stream_transcription_view      // Voir transcriptions (Partie 2)
stream_transcription_create    // CrÃ©er transcriptions (Partie 2)
quotes_capture_live           // Capturer citations en direct (Partie 2)
```

### Permissions Conducteurs
```typescript
can_acces_showplan_section
can_create_showplan
can_edit_showplan
can_delete_showplan
can_archive_showplan
can_changestatus_showplan
can_changestatus_owned_showplan
can_setOnline_showplan
can_viewAll_showplan
```

### Permissions Utilisateurs, InvitÃ©s, etc.
Voir la liste complÃ¨te des permissions en fin de document.

---

## ğŸ”„ Ã‰TAT ACTUEL DU PROJET (30 janvier 2026)

### DerniÃ¨res implÃ©mentations
- âœ… Module Citations Slice 1 & 2 (Lister + CrÃ©er)
- âœ… IntÃ©gration Citations â†” Conducteurs
- âœ… Fix boucle infinie dans useAuthCheck
- âœ… Fix erreur Firestore avec valeurs undefined
- âœ… Support requiredPermission dans ProtectedRoute

### En cours / Ã€ venir
- Slice 3-5 du module Citations
- Partie 2 : Transcription automatique (aprÃ¨s MVP stable)

### ProblÃ¨mes connus
- Migration API en cours : api.radio.audace.ovh â†’ api.cloud.audace.ovh
- Voir [docs/API_MIGRATION_GUIDE.md](docs/API_MIGRATION_GUIDE.md)

---

# ğŸ“‹ BONNES PRATIQUES (depuis AGENT.md)

## TypeScript
- âœ… Types stricts, pas de `any`
- âœ… Interfaces pour tous les objets de donnÃ©es
- âœ… Types exportÃ©s depuis `src/types/`

## React
- âœ… Hooks modernes (useState, useEffect, useCallback, useMemo)
- âœ… Composants fonctionnels uniquement
- âœ… Zustand pour state management global
- âœ… React Query pour data fetching

## Firebase
- âœ… Supprimer les valeurs `undefined` avant Firestore (utiliser `removeUndefined`)
- âœ… Utiliser `serverTimestamp()` pour createdAt/updatedAt
- âœ… Abonnements temps rÃ©el avec `onSnapshot`
- âœ… Gestion des erreurs avec try/catch

## Formulaires
- âœ… React Hook Form + Zod pour validation
- âœ… Messages d'erreur en franÃ§ais
- âœ… DÃ©sactivation des boutons pendant soumission

## Styling
- âœ… Tailwind CSS classes
- âœ… Design responsive (mobile-first)
- âœ… Lucide React pour les icÃ´nes
- âœ… Pas de bibliothÃ¨ques UI externes (sauf si demandÃ©)

## Documentation
- âœ… Mettre Ã  jour CHANGELOG.md aprÃ¨s chaque modification significative
- âœ… Commenter les fonctions complexes
- âœ… Types JSDoc pour les fonctions importantes

---







# Documentation Frontend des Routes API

Ce guide prÃ©sente pour chaque routeÂ :
- Exemple de requÃªte depuis le frontend (curl ou fetch)
- Exemple de rÃ©ponse JSON
- Validation frontend (types, contraintes)

---

## 1. Authentification (auth.py)

### 1.1 Inscription (POST /auth/signup)
- MÃ©thodeÂ : POST
- URLÂ : `/auth/signup`
- Exemple fetchÂ :
```js
fetch('/auth/signup', {
  method: 'POST',
  headers: { 'Content-Type': 'application/json' },
  body: JSON.stringify({
    email: 'user@example.com',
    password: 'Secret123!'
  })
});
```
- PayloadÂ : `{ email: string, password: string }`
  â€¢ `email`: email valide
  â€¢ `password`: min 8 caractÃ¨res (au moins une majuscule et un chiffre)
- RÃ©ponse 201 Created (`UserInDB`)
```json
{
  "id": 1,
  "email": "user@example.com",
  "is_active": true,
  "username": "user@example.com",
  "name": "",
  "family_name": "",
  "phone_number": "",
  "created_at": "2025-04-29T10:00:00Z"
}
```

### 1.2 Connexion (POST /auth/login)
- MÃ©thodeÂ : POST
- URLÂ : `/auth/login`
- En-tÃªteÂ : `Content-Type: application/x-www-form-urlencoded`
- Exemple fetchÂ :
```js
const data = new URLSearchParams();
data.append('username','user@example.com');
data.append('password','Secret123!');
fetch('/auth/login', { method:'POST', body:data });
```
- PayloadÂ : form fields `username` (email), `password`
- RÃ©ponse 200 OKÂ :
```json
{
  "access_token": "eyJ...",
  "token_type": "bearer",
  "user_id": 1,
  "username": "user@example.com",
  "email": "user@example.com",
  "family_name": "",
  "name": "",
  "phone_number": "",
  "permissions": {
    "edit_users": true,
    "delete_shows": false
  }
}
```
- ValidationÂ : `username` et `password` requis

### 1.3 DÃ©connexion (POST /auth/logout)
- MÃ©thodeÂ : POST
- URLÂ : `/auth/logout`
- En-tÃªteÂ : `Authorization: Bearer <access_token>`
- Exemple fetchÂ :
```js
fetch('/auth/logout', {
  method: 'POST',
  headers: { 'Authorization': `Bearer ${token}` }
});
```
- PayloadÂ : aucun
- RÃ©ponse 204 No Content
- ValidationÂ : token JWT valide requis

---

## 2. Utilisateurs (users_route.py)

### 2.1 Utilisateurs non prÃ©sentateurs
- MÃ©thodeÂ : GET
- URLÂ : `/users/non-presenters`
- Exemple fetchÂ :
```js
fetch('/users/non-presenters', {
  headers: { 'Authorization': `Bearer ${token}` }
});
```
- RÃ©ponse 200 OKÂ :
```json
{
  "total": 5,
  "users": [
    { "id": 3, "email": "foo@ex.com", "username": "foo@ex.com", "name": "Foo", "family_name": "Bar" },
    ...
  ]
}
```
- ValidationÂ : aucune query param, token JWT requis

### 2.2 Lister les utilisateurs actifs
- MÃ©thodeÂ : GET
- URLÂ : `/users/users?skip=0&limit=10`
- Exemple fetchÂ :
```js
fetch(`/users/users?skip=${skip}&limit=${limit}`, {
  headers: { 'Authorization': `Bearer ${token}` }
});
```
- RÃ©ponse 200 OKÂ : liste de `UserSearchResponse`
```json
[
  { "user_id":1, "email":"a@b.com", "username":"a@b.com", "name":"A","family_name":"B" },
  ...
]
```
- ValidationÂ : `skip` â‰¥Â 0, `limit` entreÂ 1Â etÂ 100, token requis

### 2.3 DÃ©tail dâ€™un utilisateur (+ permissions)
- MÃ©thodeÂ : GET
- URLÂ : `/users/users/{id}`
- Exemple fetchÂ :
```js
fetch(`/users/users/${userId}`, {
  headers: { 'Authorization': `Bearer ${token}` }
});
```
- RÃ©ponse 200 OKÂ : `UserWithPermissionsResponse`
```json
{
  "id":1,
  "email":"a@b.com",
  "username":"a@b.com",
  "name":"A",
  "family_name":"B",
  "permissions":["edit_users","view_reports"]
}
```
- Erreur 404 si non trouvÃ©

### 2.4 CrÃ©er un utilisateur
- MÃ©thodeÂ : POST
- URLÂ : `/users/users`
- Exemple fetchÂ :
```js
fetch('/users/users', {
  method:'POST',
  headers:{
    'Content-Type':'application/json'
  },
  body: JSON.stringify({
    email:'new@ex.com',
    password:'P@ssw0rd!',
    username:'new@ex.com',
    name:'New',
    family_name:'User'
  })
});
```
- PayloadÂ :
  â€¢ `email`, `username`: email valide
  â€¢ `password`: string (hachÃ©e cÃ´tÃ© backend)
  â€¢ `name`, `family_name`: string
- RÃ©ponse 201 CreatedÂ :
```json
{
  "user_id":10,
  "email":"new@ex.com",
  "username":"new@ex.com",
  "name":"New",
  "family_name":"User"
}
```
- Erreur 400 si Ã©chec de crÃ©ation, 422 si validation Ã©choue

### 2.5 Mettre Ã  jour un utilisateur (endpoint updte)
- MÃ©thodeÂ : PUT
- URLÂ : `/users/updte/{user_id}`
- Exemple fetchÂ :
```js
fetch(`/users/updte/${id}`, {
  method:'PUT',
  headers:{ 'Content-Type':'application/json' },
  body: JSON.stringify({ name:'Updated', family_name:'Name' })
});
```
- PayloadÂ : `UserUpdate` (champs optionnels)
- RÃ©ponse 200 OKÂ : `UserSearchResponse`
- Erreur 404 si non trouvÃ©

### 2.6 Mettre Ã  jour un utilisateur (endpoint upd_date)
- MÃ©thodeÂ : PUT
- URLÂ : `/users/upd_date/{id}`
- Exemple fetchÂ :
```js
fetch(`/users/upd_date/${id}`, {
  method:'PUT',
  headers:{
    'Content-Type':'application/json',
    'Authorization': `Bearer ${token}`
  },
  body: JSON.stringify({
    id: id,
    email: 'new@ex.com',
    username: 'new@ex.com',
    name: 'New',
    family_name: 'User',
    phone_number: '1234567890'
  })
});
```
- PayloadÂ : `UserInDB` complet
- RÃ©ponse 200 OKÂ : `UserInDB`
- Erreur 404 si non trouvÃ©

### 2.7 Suppression dâ€™un utilisateur
- MÃ©thodeÂ : DELETE
- URLÂ : `/users/del/{id}`
- Exemple fetchÂ :
```js
fetch(`/users/del/${id}`, {
  method:'DELETE'
});
```
- RÃ©ponse 204 No Content ou 200 OK `{ detail: 'User soft-deleted successfully' }`
- Erreur 404 si non trouvÃ©

### 2.8 Historique des connexions
- MÃ©thodeÂ : GET
- URLÂ : `/users/users/{id}/logins`
- Exemple fetchÂ :
```js
fetch(`/users/users/${userId}/logins`, {
  headers: { 'Authorization': `Bearer ${token}` }
});
```
- RÃ©ponse 200 OKÂ : liste de `LoginHistoryRead`
```json
[
  { "id":100, "user_id":1, "timestamp":"...", "ip_address":"...", "success":true },
  ...
]
```
- ValidationÂ : `id` integer, token requis

### 2.9 Notifications dâ€™un utilisateur
- MÃ©thodeÂ : GET
- URLÂ : `/users/users/{id}/notifications`
- Exemple fetchÂ :
```js
fetch(`/users/users/${userId}/notifications`, {
  headers: { 'Authorization': `Bearer ${token}` }
});
```
- RÃ©ponse 200 OKÂ : liste de `NotificationRead`

### 2.10 Logs dâ€™audit dâ€™un utilisateur
- MÃ©thodeÂ : GET
- URLÂ : `/users/users/{id}/audit-logs`
- Exemple fetchÂ :
```js
fetch(`/users/users/${userId}/audit-logs`, {
  headers: { 'Authorization': `Bearer ${token}` }
});
```
- RÃ©ponse 200 OKÂ : liste de `AuditLog`

---


## 3. RÃ´les & Permissions

### 3.1 CrÃ©er un rÃ´le (POST /roles)
```js
fetch('/roles', { method:'POST', headers:{...}, body:JSON.stringify({ name:'editor' }) });
```
RÃ©ponseÂ 201Â : `{ id:4, name:'editor', users:[] }`

### 3.2 Modifier (PUT /roles/{id})
```js
fetch(`/roles/${id}`, { method:'PUT', body:JSON.stringify({ name:'writer' }), headers:{...} });
```
StatutÂ 200 / 404.

---

## 4. Emissions & Shows

<!-- Routes dÃ©finies dans routeur/emission_route.py -->

### Ã‰missions (emission_route.py)

#### CrÃ©er une Ã©mission
- MÃ©thode: POST
- URL: `/emissions/`
- Exemple fetch depuis le frontend:
```js
fetch('/emissions/', {
  method: 'POST',
  headers: {
    'Content-Type': 'application/json',
    'Authorization': `Bearer ${token}`
  },
  body: JSON.stringify({
    title: 'Journal du matin',
    description: 'ActualitÃ©s matinales',
    start_date: '2025-05-01',
    end_date: '2025-05-31'
  })
});
```
- Payload attendu:
  â€¢ `title`: string non vide
  â€¢ `description`: string optionnelle
  â€¢ `start_date`, `end_date`: dates ISO (YYYY-MM-DD)
- RÃ©ponse 201 Created (`EmissionResponse`):
```json
{
  "id": 10,
  "title": "Journal du matin",
  "description": "ActualitÃ©s matinales",
  "start_date": "2025-05-01",
  "end_date": "2025-05-31",
  "creator_id": 1
}
```

#### Lister les Ã©missions
- MÃ©thode: GET
- URL: `/emissions/?skip=0&limit=10`
- Exemple fetch:
```js
fetch(`/emissions/?skip=${skip}&limit=${limit}`, {
  headers: { 'Authorization': `Bearer ${token}` }
});
```
- RÃ©ponse 200 OK (liste de `EmissionResponse`):
```json
[
  { "id": 5, "title": "SoirÃ©e musique", "start_date": "2025-04-01", "end_date": "2025-04-30", "creator_id":2 },
  { "id": 6, "title": "Podcast tech", ... }
]
```
- Validation frontend: `skip` â‰¥Â 0, `limit` entre 1 et 100

#### DÃ©tail dâ€™une Ã©mission
- MÃ©thode: GET
- URL: `/emissions/{emission_id}`
- Exemple fetch:
```js
fetch(`/emissions/${id}`, {
  headers: { 'Authorization': `Bearer ${token}` }
});
```
- RÃ©ponse 200 OK (`EmissionResponse`) ou 404 Not Found:
```json
{ "id":5, "title":"SoirÃ©e musique", "description":"...", "start_date":"2025-04-01", "end_date":"2025-04-30", "creator_id":2 }
```

#### Mettre Ã  jour une Ã©mission
- MÃ©thode: PUT
- URL: `/emissions/upd/{emission_id}`
- Exemple fetch:
```js
fetch(`/emissions/upd/${id}`, {
  method: 'PUT',
  headers: {
    'Content-Type': 'application/json',
    'Authorization': `Bearer ${token}`
  },
  body: JSON.stringify({ description: 'Nouvelles locales actualisÃ©es' })
});
```
- Payload: mÃªmes champs que pour la crÃ©ation (optionnels)
- RÃ©ponse 200 OK (`EmissionResponse`) ou 404 Not Found

#### Supprimer une Ã©mission
- MÃ©thode: DELETE
- URL: `/emissions/del/{emission_id}`
- Exemple fetch:
```js
fetch(`/emissions/del/${id}`, {
  method: 'DELETE',
  headers: { 'Authorization': `Bearer ${token}` }
});
```
- RÃ©ponse 200 OK: `true` ou 404 Not Found

#### Suppression douce (soft delete)
- MÃ©thode: DELETE
- URL: `/emissions/softDel/{emission_id}`
- Exemple fetch identique Ã  DELETE simple
- RÃ©ponse 200 OK: `true` ou 404 Not Found

<!-- Routes shows suivent -->

### 4.1 CrÃ©er un nouveau show simple
- MÃ©thode: POST
- URL: `/shows/`
- Body: ShowCreate (schÃ©ma `ShowCreate`)
  ```json
  {
    "title": "ActualitÃ©s",
    "type": "Info",
    "broadcast_date": "2025-04-28T10:00:00Z",
    "duration": 60,
    "frequency": "Hebdomadaire",
    "description": "Revues des actualitÃ©s",
    "status": "scheduled",
    "emission_id": 1
  }
  ```
- RÃ©ponse 201 Created (`ShowOut`)
  ```json
  {
    "id": 42,
    "title": "ActualitÃ©s",
    "type": "Info",
    "broadcast_date": "2025-04-28T10:00:00Z",
    "duration": 60,
    "frequency": "Hebdomadaire",
    "description": "Revues des actualitÃ©s",
    "status": "scheduled",
    "emission_id": 1,
    "created_at": "2025-04-20T09:00:00Z",
    "updated_at": "2025-04-20T09:00:00Z"
  }
  ```

### 4.2 Lister tous les shows
- MÃ©thode: GET
- URL: `/shows/?skip=0&limit=10`
- Query params: skip (int), limit (int)
- RÃ©ponse 200 OK (Liste `ShowOut`)
  ```json
  [
    { "id": 1, "title": "Show 1", ... },
    { "id": 2, "title": "Show 2", ... }
  ]
  ```

### 4.3 DÃ©tail dâ€™un show
- MÃ©thode: GET
- URL: `/shows/{show_id}`
- RÃ©ponse 200 OK (`ShowOut`) ou 404 Not Found
  ```json
  {
    "id": 42,
    "title": "ActualitÃ©s",
    "type": "Info",
    ...
  }
  ```

### 4.4 Supprimer un show
- MÃ©thode: DELETE
- URL: `/shows/del/{show_id}`
- RÃ©ponse 200 OK (`ShowOut` supprimÃ©) ou 404

### 4.5 Mettre Ã  jour un show
- MÃ©thode: PUT
- URL: `/shows/upd/{show_id}`
- Body: `ShowUpdate`
- RÃ©ponse 200 OK (`ShowOut`) ou 404

---

### 4.6 CrÃ©ation avec dÃ©tails (segments + prÃ©sentateurs)
- MÃ©thode: POST
- URL: `/shows/detail`
- Body: `ShowCreateWithDetail` incluant:
  - presenters: list of IDs
  - segments: array of { title, type, position, duration, description?, guest_ids? }
- RÃ©ponse 201 Created
  ```json
  {
    "message": "Show created successfully.",
    "show": { /* ShowWithdetailResponse.show */ }
  }
  ```

### 4.7 Mise Ã  jour avec dÃ©tails
- MÃ©thode: PATCH
- URL: `/shows/detail/{show_id}`
- Body: `ShowUpdateWithDetails` (array de segments Ã  modifier)
- RÃ©ponse 200 OK (`ShowWithdetailResponse`) ou 404

---

### 4.8 CrÃ©ation via JSON complet
- MÃ©thode: POST
- URL: `/shows/new`
- Body: liste de `ShowBase_jsonShow` pour multiples shows
- RÃ©ponse 200 OK
  ```json
  { "message": "Ã‰mission crÃ©Ã©e avec succÃ¨s", "show_id": 99 }
  ```

### 4.9 Routes utilitaires dÃ©taillÃ©es
- GET `/shows/x` : liste brute des dÃ©tails SQL (response_model: dict)
- GET `/shows/x/{show_id}` : dÃ©tail brut JSON
- GET `/shows/production` : shows prÃªts Ã  diffuser
- GET `/shows/owned` : shows appartenant Ã  lâ€™utilisateur connectÃ©

### 4.10 Mise Ã  jour de statut partielle
- MÃ©thode: PATCH
- URL: `/shows/status/{show_id}`
- Body: `{ "status": "live" }` (`ShowStatuslUpdate`)
- RÃ©ponse 200 OK `{ "id": show_id, "status": "live" }` ou 400 si status manquant

**Validation frontend**:
- `id`, `emission_id`Â : entiers
- `scheduled_at`, `broadcast_date`Â : ISO 8601
- `status`Â : enum ["scheduled","live","ended"]
- `presenters`Â : liste dâ€™entiers
- `segments`Â : structure avec `position` â‰¥Â 1, `duration` â‰¥Â 0

---

## 5. Segments & InvitÃ©s

### 5.1 Ajouter un segment (POST /segments)
```js
fetch('/segments', { method:'POST', body:JSON.stringify({ name:'Intro', order:1, duration:300 }), headers:{...} });
```
ValidationÂ : order â‰¥1, duration en secondes.

### 5.2 Associer un invitÃ© (POST /segments/{id}/guests)
```js
fetch(`/segments/${segId}/guests`, { method:'POST', body:JSON.stringify({ guest_id:5 }), headers:{...} });
```
200 / 404.

---

## 6. Notifications

### 6.1 Envoyer (POST /notifications)
```js
fetch('/notifications', { method:'POST', body:JSON.stringify({ user_id:1, message:'Hello' }), headers:{...} });
```
ValidationÂ : user_id int, message non vide.

### 6.2 Lister (GET /notifications)
```js
fetch('/notifications', { headers:{...} });
```
200Â : liste dâ€™objets `{ id, message, sent_at, status }`.

---

## 8. Dashboard

### 8.1 Statistiques (GET /dashbord)
```js
fetch('/dashbord?from_date=2025-04-01&to_date=2025-04-28', { headers:{...} });
```
RÃ©ponseÂ 200Â ou 404 si pas de donnÃ©es.

ValidationÂ : dates ISO.

---

## 9. Recherche

### 9.1 Utilisateurs (GET /search_users?keyword=test)
200 / 400 si keyword manquant.

### 9.2 Shows (GET /search_shows?keywords=xxx)
200 / 404 si pas de rÃ©sultat.

---

> **Conseil Frontend**Â : utiliser une fonction utilitaire pour vÃ©rifier le code HTTP et parser proprement le `detail` en cas dâ€™erreur.

---

## 6. InvitÃ©s (guest_route.py)

#### 6.1 CrÃ©er un invitÃ©
- MÃ©thodeÂ : POST
- URLÂ : `/guests/`
- BodyÂ : `GuestCreate`
  ```json
  {
    "name": "John Doe",
    "role": "Speaker",
    "contact_info": "john.doe@example.com"
  }
  ```
- RÃ©ponse 201 Created (`GuestResponse`)
  ```json
  {
    "id": 7,
    "name": "John Doe",
    "role": "Speaker",
    "contact_info": "john.doe@example.com"
  }
  ```
- ValidationÂ : `name`: non vide, `role`: string, `contact_info`: email ou texte libre

#### 6.2 Recherche dâ€™invitÃ©s
- MÃ©thodeÂ : GET
- URLÂ : `/guests/search?query=John`
- RÃ©ponse 200 OK (liste de `GuestResponseWithAppearances` ou `GuestResponse`)
  ```json
  [
    { "id": 7, "name": "John Doe", ... }
  ]
  ```
- ValidationÂ : `query`: non vide, chaÃ®ne de recherche

#### 6.3 DÃ©tail dâ€™un invitÃ©
- MÃ©thodeÂ : GET
- URLÂ : `/guests/{guest_id}`
- RÃ©ponse 200 OK (`GuestResponse`)
  ```json
  {
    "id": 7,
    "name": "John Doe",
    "role": "Speaker",
    "contact_info": "john.doe@example.com"
  }
  ```
- 404 Not Found si `guest_id` invalide

#### 6.4 Liste des invitÃ©s
- MÃ©thodeÂ : GET
- URLÂ : `/guests/?skip=0&limit=10`
- Query paramsÂ : `skip`, `limit`
- RÃ©ponse 200 OK (liste `GuestResponse`)
  ```json
  [ { "id":1, ... }, { "id":2, ... } ]
  ```

#### 6.5 Mise Ã  jour dâ€™un invitÃ©
- MÃ©thodeÂ : PUT
- URLÂ : `/guests/{guest_id}`
- BodyÂ : `GuestUpdate` (tous champs optionnels)
  ```json
  { "role": "Panelist" }
  ```
- RÃ©ponse 200 OK (`GuestResponse`) ou 404

#### 6.6 Suppression dâ€™un invitÃ©
- MÃ©thodeÂ : DELETE
- URLÂ : `/guests/{guest_id}`
- RÃ©ponse 200 OK
  ```json
  { "message": "InvitÃ© supprimÃ© avec succÃ¨s" }
  ```
- 404 Not Found si absent

#### 6.7 DÃ©tails et participations
- MÃ©thodeÂ : GET
- URLÂ : `/guests/details/{guest_id}`
- RÃ©ponse 200 OK (`GuestResponseWithAppearances`)
  ```json
  {
    "id": 7,
    "name": "John Doe",
    "appearances": [
      { "show_id": 42, "title": "ActualitÃ©s", "date": "2025-04-20T15:00:00Z" }
    ]
  }
  ```
- ValidationÂ : `guest_id`: entier

**Validation frontend**Â :
- `id`Â : entier
- `name`, `role`, `contact_info`Â : chaÃ®nes non vides
- `appeâ€‹arances`: liste dâ€™objets avec `show_id`: int, `title`: string, `date`: ISO

---

## Permissions (permissions_route.py)

### 1. RÃ©cupÃ©rer les permissions dâ€™un utilisateur
- MÃ©thode: GET
- URL: `/permissions/users/{user_id}`
- Headers: `Authorization: Bearer <token>`
- RÃ©ponse 200 OK:
```json
{
  "edit_users": true,
  "delete_shows": false,
  "view_audit_logs": true
}
```
- 404 Not Found si utilisateur inconnu
- Validation frontend: `user_id` (integer)

### 2. Gestion des rÃ´les

#### 2.1 Lister tous les rÃ´les
- MÃ©thode: GET
- URL: `/permissions/roles`
- RÃ©ponse 200 OK:
```json
[
  { "id": 1, "name": "admin", "description": "Administrateur" },
  { "id": 2, "name": "editor", "description": "Ã‰diteur" }
]
```

#### 2.2 DÃ©tail dâ€™un rÃ´le
- MÃ©thode: GET
- URL: `/permissions/roles/{role_id}`
- RÃ©ponse 200 OK:
```json
{ "id": 1, "name": "admin", "description": "Administrateur" }
```
- 404 Not Found si non trouvÃ©

#### 2.3 CrÃ©er un rÃ´le
- MÃ©thode: POST
- URL: `/permissions/roles`
- Body:
```json
{ "name": "viewer", "description": "Lecteur seule" }
```
- RÃ©ponse 201 Created:
```json
{ "id": 3, "name": "viewer", "description": "Lecteur seule", "users": [] }
```
- Validation frontend: `name` (non vide), `description` (optionnel)

#### 2.4 Mettre Ã  jour un rÃ´le
- MÃ©thode: PUT
- URL: `/permissions/roles/{role_id}`
- Body:
```json
{ "name": "viewer", "description": "AccÃ¨s lecture" }
```
- RÃ©ponse 200 OK ou 404

#### 2.5 Supprimer un rÃ´le
- MÃ©thode: DELETE
- URL: `/permissions/roles/{role_id}`
- RÃ©ponse 200 OK:
```json
{ "message": "RÃ´le supprimÃ© avec succÃ¨s" }
```
- 404 Not Found si non trouvÃ©

#### 2.6 RÃ©cupÃ©rer les permissions dâ€™un rÃ´le
- MÃ©thode: GET
- URL: `/permissions/roles/{role_id}/permissions`
- RÃ©ponse 200 OK:
```json
[
  { "code": "edit_users", "description": "Ã‰dition des utilisateurs" },
  { "code": "delete_emissions", "description": "Suppression des Ã©missions" }
]
```

### 3. Gestion des permissions

#### 3.1 Lister toutes les permissions
- MÃ©thode: GET
- URL: `/permissions/permissions`
- RÃ©ponse 200 OK:
```json
[
  { "id": 1, "code": "edit_users", "description": "Ã‰dition des utilisateurs" },
  { "id": 2, "code": "view_reports", "description": "Consultation des rapports" }
]
```

#### 3.2 DÃ©tail dâ€™une permission
- MÃ©thode: GET
- URL: `/permissions/permissions/{permission_id}`
- RÃ©ponse 200 OK:
```json
{ "id": 1, "code": "edit_users", "description": "Ã‰dition des utilisateurs" }
```
- 404 Not Found si non trouvÃ©

#### 3.3 Mettre Ã  jour les permissions dâ€™un utilisateur
- MÃ©thode: PUT
- URL: `/permissions/update_permissions/{user_id}`
- Body (JSON):
```json
{
  "edit_users": true,
  "delete_shows": false
}
```
- RÃ©ponse 200 OK:
```json
{ "message": "Permissions mises Ã  jour" }
```
- Validation frontend: clÃ©s string, valeurs boolÃ©ennes

### 4. ModÃ¨les de rÃ´les (Role Templates)

#### 4.1 CrÃ©er un modÃ¨le de rÃ´le
- MÃ©thode: POST
- URL: `/permissions/templates`
- Body:
```json
{ "name": "basic_editor", "permissions": ["edit_users", "delete_shows"] }
```
- RÃ©ponse 201 Created:
```json
{ "id": "uuid-1234", "name": "basic_editor", "permissions": ["edit_users", "delete_shows"] }
```

#### 4.2 RÃ©cupÃ©rer un modÃ¨le de rÃ´le
- MÃ©thode: GET
- URL: `/permissions/templates/{template_id}`
- RÃ©ponse 200 OK:
```json
{ "id": "uuid-1234", "name": "basic_editor", "permissions": ["edit_users"] }
```
- 404 Not Found si non trouvÃ©

#### 4.3 Lister tous les modÃ¨les de rÃ´les
- MÃ©thode: GET
- URL: `/permissions/templates`
- RÃ©ponse 200 OK:
```json
[
  { "id": "uuid-1", "name": "basic_editor", "permissions": ["edit_users"] },
  { "id": "uuid-2", "name": "viewer_template", "permissions": ["view_reports"] }
]
```

#### 4.4 Mettre Ã  jour un modÃ¨le de rÃ´le
- MÃ©thode: PUT
- URL: `/permissions/templates/{template_id}`
- Body:
```json
{ "name": "advanced_editor", "permissions": ["edit_users", "publish_emissions"] }
```
- RÃ©ponse 200 OK ou 404

#### 4.5 Supprimer un modÃ¨le de rÃ´le
- MÃ©thode: DELETE
- URL: `/permissions/templates/{template_id}`
- RÃ©ponse 200 OK:
```json
{ "detail": "ModÃ¨le supprimÃ© avec succÃ¨s" }
```
- 404 Not Found si non trouvÃ©

#### 4.6 Appliquer un modÃ¨le de rÃ´le Ã  un utilisateur
- MÃ©thode: POST
- URL: `/permissions/apply_template/{user_id}`
- Body:
```json
{ "template_id": "uuid-1234" }
```
- RÃ©ponse 200 OK:
```json
{ "message": "ModÃ¨le appliquÃ© avec succÃ¨s" }
```
- Validation frontend: `user_id` (integer), `template_id` (UUID string)

---

## Segments (segment_route.py)

### CrÃ©er un segment
- MÃ©thodeÂ : POST
- URLÂ : `/segments/`
- HeadersÂ : `Authorization: Bearer <token>`, `Content-Type: application/json`
- BodyÂ : `SegmentCreate`
  ```json
  {
    "name": "Introduction",
    "order": 1,
    "duration": 300
  }
  ```
- RÃ©ponse 201 Created (`SegmentResponse`)
  ```json
  {
    "id": 12,
    "name": "Introduction",
    "order": 1,
    "duration": 300,
    "description": null
  }
  ```
- ValidationÂ :
  - `name`: string non vide
  - `order`: entier â‰¥Â 1
  - `duration`: entier â‰¥Â 0

### Lister tous les segments
- MÃ©thodeÂ : GET
- URLÂ : `/segments/?skip=0&limit=10`
- HeadersÂ : `Authorization: Bearer <token>`
- RÃ©ponse 200 OK (liste de `SegmentResponse`)
  ```json
  [
    { "id": 1, "name": "Intro", "order": 1, "duration": 180 },
    { "id": 2, "name": "DÃ©bat", "order": 2, "duration": 600 }
  ]
  ```
- ValidationÂ : `skip` (int â‰¥Â 0), `limit` (int 1â€“100)

### DÃ©tail dâ€™un segment
- MÃ©thodeÂ : GET
- URLÂ : `/segments/{segment_id}`
- HeadersÂ : `Authorization: Bearer <token>`
- RÃ©ponse 200 OK (`SegmentResponse`)
  ```json
  { "id": 12, "name": "Introduction", "order": 1, "duration": 300 }
  ```
- Erreur 404 Not Found si `segment_id` invalide

### Mettre Ã  jour un segment
- MÃ©thodeÂ : PUT
- URLÂ : `/segments/{segment_id}`
- HeadersÂ : `Authorization: Bearer <token>`, `Content-Type: application/json`
- BodyÂ : `SegmentUpdate` (tous champs optionnels)
  ```json
  { "name": "Intro modifiÃ©", "duration": 320 }
  ```
- RÃ©ponse 200 OK (`SegmentResponse`) ou 404
- ValidationÂ : mÃªmes contraintes que crÃ©ation

### Mettre Ã  jour la position
- MÃ©thodeÂ : PATCH
- URLÂ : `/segments/{segment_id}/position`
- HeadersÂ : `Authorization: Bearer <token>`, `Content-Type: application/json`
- BodyÂ :
  ```json
  { "position": 3 }
  ```
- RÃ©ponse 200 OK (`SegmentResponse`) ou 404
- ValidationÂ : `position`: entier â‰¥Â 1

### Soft delete dâ€™un segment
- MÃ©thodeÂ : DELETE
- URLÂ : `/segments/{segment_id}`
- HeadersÂ : `Authorization: Bearer <token>`
- RÃ©ponse 200 OK:
  ```json
  { "message": "Segment supprimÃ© avec succÃ¨s" }
  ```
- Erreur 404 Not Found si absent

---

## Dashboard (dashbord_route.py)

### RÃ©cupÃ©rer les statistiques gÃ©nÃ©rales
- MÃ©thodeÂ : GET
- URLÂ : `/dashbord/`
- En-tÃªtesÂ : `Authorization: Bearer <token>`
- Exemple fetchÂ :
```js
fetch('/dashbord/', {
  headers: { 'Authorization': `Bearer ${token}` }
});
```
- PayloadÂ : aucun
- RÃ©ponse 200 OKÂ : objet `DashboardStats`
```json
{
  "emissions_du_jour": 5,
  "en_direct_et_a_venir": 2,
  "emissions_planifiees": 10,
  "membres_equipe": 12,
  "heures_direct": 4.5,
  "programme_du_jour": [
    { "id": 101, "emission_id": 7, "title": "News Morning", "broadcast_date": "2025-04-29T08:00:00Z", "status": "live", "animateur": "Alice", "segments": [] }
  ]
}
```
- Erreurs possiblesÂ :
  â€¢ 400 Bad Request (donnÃ©e invalide)
  â€¢ 500 Internal Server Error (erreur serveur ou base de donnÃ©es)
- Validation frontendÂ :
  â€¢ aucune query param
  â€¢ vÃ©rifier la prÃ©sence et le format du JWT dans lâ€™en-tÃªte

---

## Recherche dâ€™utilisateurs (search_user_route.py)

### 9.1 Recherche par mot-clÃ©
- MÃ©thodeÂ : GET
- URLÂ : `/search_users/?keyword=<mot>`
- Exemple fetchÂ :
```js
fetch(`/search_users/?keyword=${encodeURIComponent(keyword)}`, {
  headers: { 'Authorization': `Bearer ${token}` }
});
```
- PayloadÂ : aucun body, paramÃ¨tre `keyword` requis
- RÃ©ponse 200 OKÂ : liste de `UserSearchResponse`
```json
[
  { "user_id": 1, "email": "alice@example.com", "username": "alice@example.com", "name": "Alice", "family_name": "Smith" },
  ...
]
```
- ErreursÂ :
  - 400 Bad Request si `keyword` manquant
  - 404 Not Found si aucun utilisateur ne correspond
- Validation frontÂ : `keyword`: string non vide

### 9.2 RÃ©cupÃ©ration par ID
- MÃ©thodeÂ : GET
- URLÂ : `/search_users/id/{user_id}`
- Exemple fetchÂ :
```js
fetch(`/search_users/id/${userId}`, {
  headers: { 'Authorization': `Bearer ${token}` }
});
```
- RÃ©ponse 200 OKÂ : un objet `UserSearchResponse`
```json
{ "user_id": 2, "email": "bob@example.com", "username": "bob@example.com", "name": "Bob", "family_name": "Brown" }
```
- Erreur 404 Not Found si `user_id` invalide
- Validation frontÂ : `user_id`: entier

### 9.3 Recherche multi-critÃ¨res
- MÃ©thodeÂ : GET
- URLÂ : `/search_users/search?name=<nom>&email=<mail>&role=<role>`
- Exemple fetchÂ :
```js
const params = new URLSearchParams({ name, email, role });
fetch(`/search_users/search?${params.toString()}`, {
  headers: { 'Authorization': `Bearer ${token}` }
});
```
- PayloadÂ : aucun body, filtres en query params (optionnels)
- RÃ©ponse 200 OKÂ : liste de `UserRead`
```json
[
  { "id": 3, "email": "carol@example.com", "name": "Carol", "family_name": "Davis", "roles": [], "permissions": [] },
  ...
]
```
- Erreur 404 Not Found si pas de rÃ©sultat
- Validation frontÂ : types string, chaÃ®ne vide omise

---

## Recherche de shows (search_show.py)

### GET /search_shows/
- MÃ©thodeÂ : GET
- URLÂ : `/search_shows/`
- Query params (facultatifs)Â :
  â€¢ `keyword`Â : string (motsâ€‘clÃ©s dans titre/description)
  â€¢ `status`Â : string (exÂ : "scheduled", "live", "ended")
  â€¢ `dateFrom`Â : string (ISOÂ 8601, date de dÃ©but)
  â€¢ `dateTo`Â : string (ISOÂ 8601, date de fin)
  â€¢ `presenter`Â : List<int> (IDs de prÃ©sentateurs)
  â€¢ `guest`Â : List<int> (IDs dâ€™invitÃ©s)
  â€¢ `skip`Â : int â‰¥Â 0 (pagination)
  â€¢ `limit`Â : int â‰¥Â 1 (pagination)

- Exemple fetchÂ :
```js
const params = new URLSearchParams();
params.append('keyword', keyword);
params.append('status', status);
params.append('dateFrom', dateFrom);
params.append('dateTo', dateTo);
if (presenters.length) presenters.forEach(id => params.append('presenter', id));
if (guests.length) guests.forEach(id => params.append('guest', id));
params.append('skip', skip);
params.append('limit', limit);

fetch(`/search_shows/?${params.toString()}`, {
  headers: { 'Authorization': `Bearer ${token}` }
});
```

- RÃ©ponse 200 OKÂ : objet `{ total: int, items: Array<ShowSummary> }`
```json
{
  "total": 42,
  "items": [
    { "id": 101, "title": "News Morning", "broadcast_date": "2025-04-29T08:00:00Z", "status": "scheduled" },
    { "id": 102, "title": "Tech Talk", ... }
  ]
}
```

- ErreursÂ :
  â€¢ 400 Bad Request (paramÃ¨tres invalides)
  â€¢ 404 Not Found (aucun show trouvÃ©)
  â€¢ 500 Internal Server Error

- Validation frontendÂ :
  â€¢ `keyword`, `status`: non vide si fourni
  â€¢ `dateFrom`, `dateTo`: format ISO YYYY-MM-DD[T]HH:mm:ssZ
  â€¢ `presenter`, `guest`: tableaux dâ€™entiers
  â€¢ `skip`, `limit`: entiers â‰¥Â 0

---

## PrÃ©sentateurs (presenter_route.py)

### CrÃ©er un prÃ©sentateur
- MÃ©thodeÂ : POST
- URLÂ : `/presenters/`
- HeadersÂ : `Authorization: Bearer <token>`, `Content-Type: application/json`
- BodyÂ : `PresenterCreate`
  ```json
  {
    "name": "Alice Dupont",
    "email": "alice.dupont@example.com",
    "bio": "Journaliste spÃ©cialisÃ©e",
    "contact_info": "alice.dupont@example.com"
  }
  ```
- RÃ©ponse 201 Created (`PresenterResponse`)
  ```json
  {
    "id": 5,
    "name": "Alice Dupont",
    "email": "alice.dupont@example.com",
    "bio": "Journaliste spÃ©cialisÃ©e",
    "contact_info": "alice.dupont@example.com",
    "created_at": "2025-04-29T11:00:00Z",
    "updated_at": "2025-04-29T11:00:00Z"
  }
  ```
- Erreur 422 si payload invalide
- ValidationÂ :
  â€¢ `name`, `email` non vides
  â€¢ `email` format valid

### Lister les prÃ©sentateurs
- MÃ©thodeÂ : GET
- URLÂ : `/presenters/all?skip=0&limit=10`
- Exemple fetchÂ :
```js
fetch(`/presenters/all?skip=${skip}&limit=${limit}`, {
  headers: { 'Authorization': `Bearer ${token}` }
});
```
- RÃ©ponse 200 OK (`List[PresenterResponsePaged]`)
  ```json
  {
    "total": 35,
    "items": [
      { "id":1, "name":"Jean Martin", ... },
      ...
    ]
  }
  ```
- ValidationÂ : `skip`Â â‰¥0, `limit` entreÂ 1 etÂ 100

### DÃ©tail dâ€™un prÃ©sentateur
- MÃ©thodeÂ : GET
- URLÂ : `/presenters/{presenter_id}`
- Exemple fetchÂ :
```js
fetch(`/presenters/${id}`, {
  headers: { 'Authorization': `Bearer ${token}` }
});
```
- RÃ©ponse 200 OK (`PresenterResponse`) :
  ```json
  { "id":5, "name":"Alice Dupont", "email":"...", "bio":"...", "contact_info":"..." }
  ```
- Erreur 404 Not Found si non trouvÃ©
- ValidationÂ : `presenter_id`: entier

### RÃ©cupÃ©rer par user_id
- MÃ©thodeÂ : GET
- URLÂ : `/presenters/by-user/{users_id}`
- Exemple fetchÂ :
```js
fetch(`/presenters/by-user/${userId}`, {
  headers: { 'Authorization': `Bearer ${token}` }
});
```
- RÃ©ponse 200 OK (`PresenterResponse`) ou 404 si pas de prÃ©sentateur

### Mettre Ã  jour un prÃ©sentateur
- MÃ©thodeÂ : PUT
- URLÂ : `/presenters/update/{presenter_id}`
- BodyÂ : `PresenterUpdate`
  ```json
  { "bio": "Animatrice politique", "contact_info": "alice.new@example.com" }
  ```
- RÃ©ponse 200 OK (`PresenterResponse`)
- Erreur 404 Not Found si non trouvÃ©
- ValidationÂ : champs optionnels mais types corrects

### Supprimer un prÃ©sentateur
- MÃ©thodeÂ : DELETE
- URLÂ : `/presenters/del/{presenter_id}`
- Exemple fetchÂ :
```js
fetch(`/presenters/del/${id}`, {
  method: 'DELETE',
  headers: { 'Authorization': `Bearer ${token}` }
});
```
- RÃ©ponse 204 No Content ou 200 OK `{ message: "Presenter deleted successfully" }`
- Erreur 404 Not Found si non trouvÃ©
- ValidationÂ : `presenter_id`: entier

---

## Route par dÃ©faut (Root)
- MÃ©thodeÂ : GET
- URLÂ : `/`
- Exemple fetchÂ :
```js
fetch('/', { method: 'GET' });
```
- PayloadÂ : aucun
- RÃ©ponse 200 OKÂ :
```json
{ "BIEBVENUE": "HAPSON API pour AMG" }
```
- Validation frontendÂ : aucune authentification requise





## Temporary Invite Links

### Backend (routeur/auth.py)
- Route : POST `/auth/invite`
- StatutÂ : 201 Created
- Corps de requÃªteÂ : `{ "email": string }`
- RÃ©ponse 201Â :
  ```json
  {
    "token": "uuid-1234-abcd",         // jeton unique
    "expires_at": "2025-05-09T12:00:00Z" // date ISO d'expiration
  }
  ```
- Erreurs possiblesÂ :
  - 400 Bad RequestÂ : absence ou format d'email invalide
  - 500 Internal Server ErrorÂ : problÃ¨me interne serveur

- Route : GET `/auth/invite/validate`
- StatutÂ : 200 OK
- Query paramÂ : `token` (string)
- RÃ©ponse 200Â :
  ```json
  {
    "valid": true,                 // vrai si non expirÃ© et non utilisÃ©
    "email": "invitee@example.com" // email associÃ© au token
  }
  ```
- Erreurs :
  - 400 Bad RequestÂ : token manquant
  - 404 Not FoundÂ : token non existant, dÃ©jÃ  utilisÃ© ou expirÃ©

- Route : POST `/auth/signup-with-invite`
- StatutÂ : 201 Created
- Corps de requÃªteÂ :
  ```json
  {
    "token": "uuid-1234-abcd",
    "username": "invitee",          // nom d'utilisateur unique
    "email": "invitee@example.com", // email valide
    "password": "Secret123!",       // mot de passe sÃ©curisÃ©
    "name": "PrÃ©nom",               // prÃ©nom de l'utilisateur
    "family_name": "Nomfamille",    // nom de famille
    "phone_number": "+33612345678", // numÃ©ro de tÃ©lÃ©phone
  }
  ```
- RÃ©ponse 201Â :
  ```json
  {
    "id": 42,
    "email": "invitee@example.com",
    "username": "invitee",
    "created_at": "2025-05-02T10:15:00Z",
    "password": "Secret123!",       // mot de passe sÃ©curisÃ©
    "name": "PrÃ©nom",               // prÃ©nom de l'utilisateur
    "family_name": "Nomfamille",    // nom de famille
    "phone_number": "+33612345678", // numÃ©ro de tÃ©lÃ©phone
    
  }
  ```
- ErreursÂ :
  - 400 Bad RequestÂ : donnÃ©es manquantes ou invalides
  - 401 UnauthorizedÂ : token invalide ou expirÃ©
  - 409 ConflictÂ : email ou username dÃ©jÃ  existant
  - 410 GoneÂ : token utilisÃ© ou pÃ©rimÃ©

### Frontend (src/components/auth/GenerateInviteLink.tsx)
- Importer les hooks React (`useState`, `useEffect`) et un client HTTP (`axios` ou `fetch`).
- Ã‰tats Ã  gÃ©rerÂ :
  * `email: string` â€“ modÃ¨le du champ email.
  * `loading: boolean` â€“ indicateur de chargement pendant lâ€™appel.
  * `inviteLink: string | null` â€“ lien gÃ©nÃ©rÃ© ou null.
  * `expiresAt: string | null` â€“ date dâ€™expiration ISO pour affichage.
  * `error: string | null` â€“ message dâ€™erreur utilisateur.
- Formulaire :
  1. Champ email avec validation en `onChange` (regex simple + non vide).
  2. Bouton Â«Â GÃ©nÃ©rer le lienÂ Â» dÃ©sactivÃ© si `loading` ou email invalide.
- Fonction `handleGenerate`Â :
  ```tsx
  async function handleGenerate() {
    setLoading(true);
    setError(null);
    try {
      const response = await axios.post('/auth/invite', { email });
      const { token, expires_at } = response.data;
      setInviteLink(`${window.location.origin}/signup/${token}`);
      setExpiresAt(expires_at);
    } catch (err) {
      setError(err.response?.data?.detail || 'Erreur lors de la gÃ©nÃ©ration du lien');
    } finally {
      setLoading(false);
    }
  }
  ```
- UI Ã  afficherÂ :
  * Spinner ou indicator lorsque `loading === true`.
  * En cas de succÃ¨s (`inviteLink` non null)Â :
    - Afficher le lien cliquable.
    - Bouton Â«Â CopierÂ Â» avec `navigator.clipboard.writeText(inviteLink)` et feedback visuel (Â«Â Lien copiÃ©Â !Â»).
    - Texte Â«Â Expire le: {new Date(expiresAt).toLocaleString()}Â Â».
  * En cas dâ€™erreur (`error` non null)Â : afficher `error` en rouge.
- RÃ©initialisationÂ :
  * Si lâ€™email change, nettoyer `inviteLink`, `expiresAt` et `error`.
- IntÃ©grationÂ :
  * Render ce composant dans la page dâ€™administration (`src/pages/users/UserList.tsx` ou `AdminDashboard`).
  * Passer un prop `onInviteSent(token: string)` si besoin de notifier le parent.

### Signup avec invite (src/pages/auth/SignupWithInvite.tsx)
- Importer les hooks React (`useState`, `useEffect`) et router (`useParams`, `useNavigate`) ainsi quâ€™un client HTTP (`axios` ou `fetch`).
- Ã‰tats Ã  gÃ©rerÂ :
  * `token: string` â€“ extrait de lâ€™URL (`useParams`).
  * `loading: boolean` â€“ pour lâ€™appel de validation et de crÃ©ation.
  * `error: string | null` â€“ message dâ€™erreur global.
  * `valid: boolean` â€“ si le token est valide (initialement false).
  * `email: string` â€“ obtenu via la validation du token (lecture seule).
  * `form: { username: string; password: string; name: string; family_name: string; phone_number?: string; profilePicture?: string }`Â â€“ donnÃ©es saisies.
- `useEffect` au montageÂ :
  ```tsx
  useEffect(() => {
    async function validate() {
      setLoading(true);
      try {
        const res = await axios.get(`/auth/invite/validate?token=${token}`);
        setEmail(res.data.email);
        setValid(true);
      } catch (err) {
        setError(err.response?.data?.detail || 'Lien invalide ou expirÃ©');
      } finally {
        setLoading(false);
      }
    }
    validate();
  }, [token]);
  ```
- Formulaire de signup (affichÃ© si `valid === true`)Â :
  1. ChampsÂ : username, password, name, family_name, phone_number, profilePicture (URL). Tous obligatoires sauf les deux derniers.
  2. Validation simpleÂ : non vide pour username/password, format URL pour avatar.
- Fonction `handleSignup`Â :
  ```tsx
  async function handleSignup() {
    setLoading(true);
    setError(null);
    try {
      const payload = { token, email, ...form };
      await axios.post('/auth/signup-with-invite', payload);
      navigate('/login', { state: { message: 'Compte crÃ©Ã© avec succÃ¨s. Veuillez vous connecter.' } });
    } catch (err) {
      setError(err.response?.data?.detail || 'Erreur lors de la crÃ©ation de compte');
    } finally {
      setLoading(false);
    }
  }
  ```
- UIÂ :
  * Si `loading`, afficher un spinner.
  * Si `error`, afficher le message en rouge.
  * Si `!valid && !loading`, afficher un message Â« Lien invalide ou expirÃ© Â».
  * FormulaireÂ : boutons Â«Â ValiderÂ Â» dÃ©sactivÃ© tant que `loading` ou validation Ã©choue.
  * AprÃ¨s succÃ¨s, rediriger vers la page de login avec un toast ou message.
- IntÃ©grationÂ :
  * DÃ©clarer la route ReactÂ : `<Route path="/signup/:token" element={<SignupWithInvite />} />`.
  * Ajouter de la navigation conditionnelle pour `token` manquant.



# Gestion des permissions utilisateur

Ce document dÃ©crit comment ajouter et supprimer les permissions suivantes Ã  un utilisateur :
- can_acces_showplan_section
- can_create_showplan
- can_changestatus_owned_showplan
- can_delete_showplan
- can_edit_showplan
- can_archive_showplan
- can_acces_guests_section
- can_view_guests
- can_edit_guests
- can_view_archives

## 1. Backend : mise Ã  jour des permissions

### 1.1 hook a utiliser par le front
utiliser le hook existant useUpdatePermissions
pour le mecanisme d'atribution ou de supression de ces privileges par defaut des presentateurs

## 2. Liste complÃ¨te des permissions disponibles

- can_acces_showplan_broadcast_section
- can_acces_showplan_section
- can_create_showplan
- can_edit_showplan
- can_archive_showplan
- can_archiveStatusChange_showplan
- can_delete_showplan
- can_destroy_showplan
- can_changestatus_showplan
- can_changestatus_owned_showplan
- can_changestatus_archived_showplan
- can_setOnline_showplan
- can_viewAll_showplan

- can_acces_users_section
- can_view_users
- can_edit_users
- can_desable_users
- can_delete_users

- can_manage_roles
- can_assign_roles

- can_acces_guests_section
- can_view_guests
- can_edit_guests
- can_delete_guests

- can_acces_presenters_section
- can_view_presenters
- can_create_presenters
- can_edit_presenters
- can_delete_presenters

- can_acces_emissions_section
- can_view_emissions
- can_create_emissions
- can_edit_emissions
- can_delete_emissions
- can_manage_emissions

- can_view_notifications
- can_manage_notifications

- can_view_audit_logs
- can_view_login_history

- can_manage_settings

- can_view_messages
- can_send_messages
- can_delete_messages

- can_view_files
- can_upload_files
- can_delete_files

- can_view_tasks
- can_create_tasks
- can_edit_tasks
- can_delete_tasks
- can_assign_tasks

- can_view_archives
- can_destroy_archives
- can_restore_archives
- can_delete_archives

**Permissions Citations (ajoutÃ©es en janvier 2026)** :
- quotes_view                    // Voir les citations
- quotes_create                  // CrÃ©er des citations
- quotes_edit                    // Modifier des citations
- quotes_delete                  // Supprimer des citations
- quotes_publish                 // Publier des citations
- stream_transcription_view      // Voir transcriptions (Partie 2 - Ã  venir)
- stream_transcription_create    // CrÃ©er transcriptions (Partie 2 - Ã  venir)
- quotes_capture_live           // Capturer citations en direct (Partie 2 - Ã  venir)

---

## 5. Module Citations (Firebase Firestore)

**âš ï¸ Important** : Le module Citations utilise Firebase Firestore, pas l'API FastAPI.

### 5.1 Structure des donnÃ©es

**Collection Firestore** : `quotes`

**Type Quote** :
```typescript
interface Quote {
  id: string;
  content: string;                    // Texte de la citation (10-500 caractÃ¨res)
  author: {
    id?: string;
    name: string;
    role?: 'guest' | 'presenter' | 'other';
    avatar?: string;
  };
  context?: {
    showId?: string;                  // ID du conducteur
    showPlanId?: string;              // ID du conducteur (redondant pour clartÃ©)
    showName?: string;                // Nom de l'Ã©mission
    emissionId?: string;              // ID de l'Ã©mission
    date?: string;                    // Date ISO
    timestamp?: string;               // Timestamp dans l'Ã©mission (HH:mm:ss)
  };
  source: {
    type: 'manual' | 'stream_transcription' | 'audio_file';
    audioUrl?: string;                // URL Firebase Storage
    audioFile?: string;               // Nom du fichier
    duration?: number;                // DurÃ©e en secondes
  };
  metadata?: {
    category?: 'statement' | 'position' | 'quote' | 'fact';
    tags: string[];
    language?: 'fr' | 'en';
    isVerified?: boolean;
  };
  publications: Array<{
    id: string;
    platform: 'facebook' | 'twitter' | 'instagram' | 'linkedin' | 'other';
    content: string;
    image?: string;
    publishedAt?: string;
    status: 'draft' | 'scheduled' | 'published';
    url?: string;
  }>;
  status: 'draft' | 'approved' | 'published' | 'archived';
  createdBy: string;                  // User ID
  createdAt: string;                  // ISO timestamp
  updatedAt: string;                  // ISO timestamp
}
```

### 5.2 CrÃ©er une citation (Firebase)

**âš ï¸ RÃ¨gle importante** : Supprimer toutes les valeurs `undefined` avant d'envoyer Ã  Firestore !

**Service** : `src/api/firebase/quotes.ts`

```typescript
import { createQuote } from '../../api/firebase/quotes';

// Fonction utilitaire pour nettoyer les undefined
const removeUndefined = <T extends Record<string, any>>(obj: T): Partial<T> => {
  const cleaned: any = {};
  for (const key in obj) {
    if (obj[key] !== undefined) {
      if (typeof obj[key] === 'object' && obj[key] !== null && !Array.isArray(obj[key])) {
        const nested = removeUndefined(obj[key]);
        if (Object.keys(nested).length > 0) {
          cleaned[key] = nested;
        }
      } else {
        cleaned[key] = obj[key];
      }
    }
  }
  return cleaned;
};

// CrÃ©ation
const quoteData: CreateQuoteData = {
  content: "Citation exemple",
  author: {
    name: "Jean Dupont",
    ...(role && { role }),
    ...(avatar && { avatar }),
  },
  source: { type: 'manual' },
  metadata: { tags: [], language: 'fr', isVerified: false },
  status: 'draft',
  createdBy: userId,
};

const cleanedData = removeUndefined(quoteData);
const quoteId = await createQuote(cleanedData, userId);
```

### 5.3 Lister les citations (temps rÃ©el)

```typescript
import { useQuotes } from '../../hooks/quotes/useQuotes';

// Dans un composant
const { quotes, isLoading, error, refresh } = useQuotes({ status: 'draft' });

// Les quotes se mettent Ã  jour en temps rÃ©el via onSnapshot
```

**Filtres disponibles** :
```typescript
interface QuoteFilters {
  status?: 'draft' | 'approved' | 'published' | 'archived';
  emissionId?: string;
  authorId?: string;
  sourceType?: 'manual' | 'stream_transcription' | 'audio_file';
  category?: 'statement' | 'position' | 'quote' | 'fact';
  tags?: string[];
}
```

### 5.4 Upload audio (Firebase Storage)

```typescript
import { ref, uploadBytes, getDownloadURL } from 'firebase/storage';
import { storage } from '../../api/firebase/firebase';

// Upload
const fileName = `quotes/${Date.now()}_${file.name}`;
const storageRef = ref(storage, fileName);
await uploadBytes(storageRef, file);
const audioUrl = await getDownloadURL(storageRef);

// Ajouter Ã  la citation
source: {
  type: 'manual',
  audioUrl,
  audioFile: file.name,
  duration: audioDuration
}
```

### 5.5 IntÃ©gration avec Conducteurs

**CrÃ©er une citation depuis un conducteur** :

```typescript
// Dans ShowPlanDetail.tsx
<button onClick={() => navigate('/quotes/create', { 
  state: { showPlan } 
})}>
  <Quote className="h-5 w-5" />
  Nouvelle citation
</button>

// Dans CreateQuote.tsx
const showPlanContext = location.state?.showPlan;

// PrÃ©-remplissage automatique
useEffect(() => {
  if (showPlanContext) {
    setDefaultValues({
      showName: showPlanContext.emission || showPlanContext.title,
      date: format(new Date(showPlanContext.broadcast_date), 'yyyy-MM-dd'),
    });
  }
}, [showPlanContext]);

// Contexte enrichi
context: {
  showId: showPlanContext?.id?.toString(),
  showPlanId: showPlanContext?.id?.toString(),
  showName: formData.showName || showPlanContext?.title,
  emissionId: showPlanContext?.emission_id?.toString(),
  date: formData.date,
  timestamp: formData.timestamp,
}
```

**SÃ©lection rapide des invitÃ©s** :

```typescript
// Dans QuoteForm.tsx
{showPlanGuests && showPlanGuests.length > 0 && (
  <select onChange={(e) => handleGuestSelect(e.target.value)}>
    <option value="">-- Saisir manuellement --</option>
    {showPlanGuests.map((guest) => (
      <option key={guest.id} value={guest.id}>
        {guest.name} {guest.role && `(${guest.role})`}
      </option>
    ))}
  </select>
)}
```

### 5.6 Validation des donnÃ©es (Zod)

**SchÃ©ma** : `src/schemas/quoteSchema.ts`

```typescript
import { z } from 'zod';

export const createQuoteFormSchema = z.object({
  content: z.string()
    .min(10, 'La citation doit contenir au moins 10 caractÃ¨res')
    .max(500, 'La citation ne peut pas dÃ©passer 500 caractÃ¨res'),
  authorName: z.string().min(1, 'Le nom de l\'auteur est requis'),
  authorRole: z.string().optional(),
  authorAvatar: z.string().url('URL invalide').optional().or(z.literal('')),
  showName: z.string().optional(),
  date: z.string().optional(),
  timestamp: z.string().optional(),
  category: z.string().optional(),
  tags: z.string().optional(), // ChaÃ®ne sÃ©parÃ©e par des virgules
  audioFile: z.instanceof(File).optional(),
});
```

### 5.7 Composants Citations

**Pages** :
- `src/pages/Quotes/QuotesList.tsx` - Liste avec filtres et temps rÃ©el
- `src/pages/Quotes/CreateQuote.tsx` - Formulaire de crÃ©ation

**Composants** :
- `src/components/quotes/QuoteCard.tsx` - Affichage d'une citation
- `src/components/quotes/QuoteForm.tsx` - Formulaire rÃ©utilisable

**Hooks** :
- `src/hooks/quotes/useQuotes.ts` - Liste avec filtres et CRUD
- `src/hooks/quotes/useQuote.ts` - Citation unique par ID

**Services** :
- `src/api/firebase/quotes.ts` - CRUD Firestore + temps rÃ©el

### 5.8 Routes Citations

```typescript
// Dans App.tsx
<Route path="quotes">
  <Route index element={<QuotesList />} />
  <Route path="create" element={
    <ProtectedRoute requiredPermission="quotes_create">
      <CreateQuote />
    </ProtectedRoute>
  } />
</Route>
```

### 5.9 ProblÃ¨mes courants et solutions

**1. Erreur "Unsupported field value: undefined"**
```typescript
// âŒ Mauvais
author: { name: "Test", role: undefined }

// âœ… Bon
author: {
  name: "Test",
  ...(role && { role })
}

// Ou utiliser removeUndefined()
const cleanedData = removeUndefined(quoteData);
```

**2. Boucle infinie dans useEffect**
```typescript
// âŒ Mauvais
const { logout } = useAuthStore();
useEffect(() => { ... }, [logout]);

// âœ… Bon
const logout = useAuthStore((state) => state.logout);
useEffect(() => { ... }, []); // Sans logout dans les dÃ©pendances
```

**3. Permissions manquantes**
```typescript
// VÃ©rifier avant affichage
const { permissions } = useAuthStore();
{permissions?.quotes_create && <button>CrÃ©er</button>}
```

---

*Fin du guide de gestion des permissions utilisateur.*