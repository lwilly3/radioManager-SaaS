# name: Deploy to Test Server (VPS venv)

# # â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
# # â”‚  DÃ‰PLOIEMENT SERVEUR TEST                                   â”‚
# # â”‚  Branche: develop                                           â”‚
# # â”‚  Serveur: VPS venv (api.radio.audace.ovh)                   â”‚
# # â”‚  Usage: Test et validation avant mise en production         â”‚
# # â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

name: Deploy to Server

on:
  push:
    branches:
      - develop  # âš ï¸  Uniquement la branche develop

jobs:
  processus_de_deploiement:
    runs-on: ubuntu-latest
    # needs:
    #   - Test-process
    environment:
      name: production

    steps:
      - name: Pull Git Repository
        uses: actions/checkout@v2

      - name: Deploy to Ubuntu Server
        uses: appleboy/ssh-action@master
        with:
          host: ${{ secrets.SERVER_IP }}
          username: ${{ secrets.SERVER_USERNAME }}
          password: ${{ secrets.SSH_PRIVATE_KEY }}
          script: |
            cd /var/www/app-radioaudace
            sudo git reset --hard HEAD
            sudo /usr/local/bin/update_frontend.sh









# on:
#   push:
#     branches:
#       - develop  # âš ï¸ Uniquement la branche develop

# jobs:
#   deploy_test:
#     runs-on: ubuntu-latest
#     # Note: CrÃ©er l'environment "test" sur GitHub si vous voulez 
#     # utiliser des secrets spÃ©cifiques ou des rÃ¨gles de protection
#     # environment:
#     #   name: test

#     steps:
#       - name: Pull Git Repository
#         uses: actions/checkout@v2

#       - name: Deploy to Test Server (VPS venv)
#         uses: appleboy/ssh-action@master
#         with:
#           host: ${{ secrets.SERVER_IP }}
#           username: ${{ secrets.SERVER_USERNAME }}
#           password: ${{ secrets.SSH_PRIVATE_KEY }}
#           script: |
#             cd /var/www/app-radioaudace-test
#             sudo git fetch origin develop
#             sudo git reset --hard origin/develop
#             sudo /usr/local/bin/update_frontend_test.sh



#             â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
# # â”‚  PRODUCTION DEPLOYMENT                                      â”‚
# # â”‚  Branche: main                                              â”‚
# # â”‚  Serveur: Docker/Dokploy (api.cloud.audace.ovh)             â”‚
# # â”‚  Usage: DÃ©ploiement en production pour les utilisateurs     â”‚
# # â”‚                                                             â”‚
# # â”‚  âš ï¸  ATTENTION: Ce workflow dÃ©ploie en PRODUCTION !         â”‚
# # â”‚      Assurez-vous que le code a Ã©tÃ© testÃ© sur staging       â”‚
# # â”‚                                                             â”‚
# # â”‚  ğŸ“Œ STATUT: DÃ‰SACTIVÃ‰ (dÃ©commenter pour activer)            â”‚
# # â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

# # â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
# # WORKFLOW COMMENTÃ‰ - DÃ©commenter les lignes ci-dessous pour activer
# # â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

# # on:
# #   push:
# #     branches:
# #       - main  # âš ï¸ Uniquement la branche main (production)

# # jobs:
# #   processus_de_deploiement:
# #     runs-on: ubuntu-latest
# #     environment:
# #       name: production
# #
# #     steps:
# #       - name: Pull Git Repository
# #         uses: actions/checkout@v2
# #
# #       - name: Deploy to Ubuntu Server
# #         uses: appleboy/ssh-action@master
# #         with:
# #           host: ${{ secrets.SERVER_IP }}
# #           username: ${{ secrets.SERVER_USERNAME }}
# #           password: ${{ secrets.SSH_PRIVATE_KEY }}
# #           script: |
# #             cd /var/www/app-radioaudace
# #             sudo git reset --hard HEAD
# #             sudo /usr/local/bin/update_frontend.sh

# # â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
# # Pour rÃ©activer ce workflow :
# # 1. DÃ©commenter les sections "on:" et "jobs:" ci-dessus
# # 2. Commit et push sur main
# # â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

    